<script>
  window.onload = function() {
   document.getElementById("list_res").innerHTML='{% assign curr_res = "" | split: ',' %}{% assign fut_res = "" | split: ',' %}{% assign past_res = "" | split: ',' %}{% for post in site.categories.residence %}{% capture nowdate %}{{ "now" | date: "%Y-%m-%d" }}{% endcapture %}{% capture findate %}{{ post.date_fin | date: "%Y-%m-%d"}}{% endcapture %}{% capture debutdate %}{{ post.date_debut | date: "%Y-%m-%d"}}{% endcapture %}{% capture annee %}{{ post.date_debut | date: "%Y" }}{% endcapture %}{% if findate >= nowdate and debutdate <= nowdate %}{% assign curr_res = curr_res | push: post | sort: 'date_debut' | reverse %}{% elsif findate >= nowdate and debutdate >= nowdate %}{% assign fut_res = fut_res | push: post | sort: 'date_debut' | reverse %}{% elsif findate <= nowdate and debutdate <= nowdate %}{% assign past_res = past_res | push: post | sort: 'date_debut' | reverse %}{% endif %}{% endfor %}<div class="list_res_diff"><h3 class="titre-encours">Résidence(s) en cours</h3>{% for post in curr_res %}<p><a href="{{post.url}}">{{ annee }} &middot; {{ post.title | escape }} &middot; {{ post.artiste | escape | remove: '[' | remove: ']' | remove: '&quot;'}}</a></p>{% else %}<p>Aucune résidence en cours.</p>{% endfor %}</div><div class="list_res_diff"><h3>Résidence(s) à venir</h3>{% for post in fut_res %}{% capture annee %}{{ post.date_debut | date: "%Y" }}{% endcapture %}<p><a href="{{post.url}}">{{ annee }} &middot; {{ post.title | escape }} &middot; {{ post.artiste | escape | remove: '[' | remove: ']' | remove: '&quot;'}}</a></p>{% else %}<p>Aucune résidence pour le moment.</p>{% endfor %}</div><div class="list_res_diff"><h3>Résidences passées</h3> {% for post in past_res %}{% capture annee %}{{ post.date_debut | date: "%Y" }}{% endcapture %}<p><a href="{{post.url}}">{{ annee }} &middot; {{ post.title | escape }} &middot; {{ post.artiste | escape  | remove: '[' | remove: ']' | remove: '&quot;' }}</a></p>{% else %}<p>Aucune résidence passée.</p>{% endfor %}</div>';

    document.getElementById("list_res_scol").innerHTML='{% assign curr_res = "" | split: ',' %}{% assign fut_res = "" | split: ',' %}{% assign past_res = "" | split: ',' %}{% for post in site.categories.residence_scolaire %}{% capture nowdate %}{{ "now" | date: "%Y-%m-%d" }}{% endcapture %}{% capture findate %}{{ post.date_fin | date: "%Y-%m-%d"}}{% endcapture %}{% capture debutdate %}{{ post.date_debut | date: "%Y-%m-%d"}}{% endcapture %}{% capture annee %}{{ post.date_debut | date: "%Y" }}{% endcapture %}{% if findate >= nowdate and debutdate <= nowdate %}{% assign curr_res = curr_res | push: post | sort: 'date_debut' | reverse %}{% elsif findate >= nowdate and debutdate >= nowdate %}{% assign fut_res = fut_res | push: post | sort: 'date_debut' | reverse %}{% elsif findate <= nowdate and debutdate <= nowdate %}{% assign past_res = past_res | push: post | sort: 'date_debut' | reverse %}{% endif %}{% endfor %}<div class="list_res_diff"><h3 class="titre-encours">Résidence(s) en cours</h3>{% for post in curr_res %}{% capture annee %}{{ post.date_debut | date: "%Y" }}{% endcapture %}<p><a href="{{post.url}}">{{ annee }} &middot; {{ post.title | escape }} &middot; {{ post.artiste | escape | remove: '[' | remove: ']' | remove: '&quot;'}}</a></p>{% else %}<p>Aucune résidence en cours.</p>{% endfor %}</div><div class="list_res_diff"><h3>Résidence(s) à venir</h3>{% for post in fut_res %}{% capture annee %}{{ post.date_debut | date: "%Y" }}{% endcapture %}<p><a href="{{post.url}}">{{ annee }} &middot; {{ post.title | escape }} &middot; {{ post.artiste | escape | remove: '[' | remove: ']' | remove: '&quot;' }}</a></p>{% else %}<p>Aucune résidence pour le moment.</p>{% endfor %}</div><div class="list_res_diff"><h3>Résidences passées</h3> {% for post in past_res %}{% capture annee %}{{ post.date_debut | date: "%Y" }}{% endcapture %}<p><a href="{{post.url}}">{{ annee }} &middot; {{ post.title | escape }} &middot; {{ post.artiste | escape | remove: '[' | remove: ']' | remove: '&quot;'}}</a></p>{% else %}<p>Aucune résidence passée.</p>{% endfor %}</div>';
}
</script>
